---
phase: 04-produktsystem-ueberarbeitung
plan: 01
subsystem: product-ui
tags: [product-cards, product-overview, hover-effects, personalization]

# Dependency graph
requires:
  - phase: 03-hauptseite-personalisierung
    plan: 03-02
    provides: Real product data integration with 9 products
  - phase: 01-foundation-cleanup
    plan: 01-02
    provides: Product slug structure in public/products/
provides:
  - Fully clickable product cards with real product images
  - Hover effect showing second product image
  - Personalized product section at top ("Für Ihre Routine")
  - Consistent elmex orange button styling
affects: [04-02-product-pages, 04-05-recommendations]

# Tech tracking
tech-stack:
  added: []
  patterns: [hover-image-swap, personalized-product-filtering, dynamic-product-cards]

key-files:
  created: []
  modified: [src/pages/produkte/index.astro]
---

<objective>
Transform product overview page with clickable cards, hover effects showing second product image, personalized "Für Ihre Routine" section at top, and consistent elmex orange button styling.

Foundation: Product slug system from Phase 1 (public/products/{slug}/) + real product integration from Phase 3.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Product structure established in Phase 1:**
- public/products/{slug}/ folders with 3 images: {slug}_01.png, _02.png, _03.png
- Existing products: kariesschutz-zahnpasta, sensitive-zahnpasta (confirmed in 03-FIX)

**Product integration from Phase 3:**
@.planning/phases/03-hauptseite-personalisierung/03-FIX-SUMMARY.md
- PersonalizedRecommendations.astro uses 9 real products with metadata
- Personalization logic based on quiz data (concern, ageGroup)

**Current product overview:**
@src/pages/produkte/index.astro
- Has 8 product cards with icon placeholders
- Filter buttons (Alle, Zahnpasta, Mundspülung, Zahnbürste)
- "Wo kaufen" links but cards not clickable
- No hover effects or product images
</context>

<tasks>

<task type="auto">
  <name>Add personalized "Für Ihre Routine" section at top</name>
  <files>src/pages/produkte/index.astro</files>
  <action>
    Add personalized product section BEFORE the filter/sort section:

    1. Create new section after hero, before filters:
       - Title: "Für Ihre Routine" (if user has quiz data) OR "Vorgeschlagen für Sie" (fallback)
       - Show 3-4 products based on user's quiz answers (concern, ageGroup, dentistFrequency)
       - Use same product card design as main grid but in horizontal layout
       - Client-side script to read localStorage 'elmex-user-profile' and filter products

    2. Personalization logic (similar to PersonalizedRecommendations widget):
       - concern='sensitivity' → show SENSITIVE products
       - concern='cavity' → show KARIESSCHUTZ products
       - concern='gum' → show ZAHNFLEISCH products
       - ageGroup='junior' or 'baby' → show JUNIOR products
       - Default: show 3 best-selling products (KARIESSCHUTZ, SENSITIVE, ZAHNFLEISCH)

    3. Visual styling:
       - Light background (bg-neutral-50) to separate from main grid
       - Horizontal scrollable on mobile
       - Grid on desktop (3-4 columns)
       - "Basierend auf Ihren Antworten" subtitle if personalized
  </action>
  <verify>
    1. Complete quiz with concern='sensitivity'
    2. Navigate to /produkte
    3. See "Für Ihre Routine" section at top with SENSITIVE products
    4. Clear localStorage - section shows "Vorgeschlagen für Sie" with default products
  </verify>
  <done>Personalized product section displays user-specific products or default recommendations</done>
</task>

<task type="auto">
  <name>Make product cards fully clickable with real images</name>
  <files>src/pages/produkte/index.astro</files>
  <action>
    Replace icon placeholders with real product images and make entire cards clickable:

    1. Replace gradient div + icon with actual product images:
       - Use images from public/products/{slug}/{slug}_01.png
       - Example: kariesschutz-zahnpasta → /products/kariesschutz-zahnpasta/kariesschutz-zahnpasta_01.png
       - Remove Lucide icon imports (ShieldCheck, Heart, etc.)

    2. Wrap entire card in `<a href="/produkte/{slug}">` tag:
       - Card structure: &lt;a class="product-card block ..."&gt;...&lt;/a&gt;
       - Remove individual "Details ansehen" link (redundant)
       - Keep "Wo kaufen" as separate action (stop propagation)

    3. Add hover effects:
       - Scale up slightly: hover:scale-105 transition-transform duration-300
       - Shadow enhancement: shadow-lg hover:shadow-2xl
       - Cursor: cursor-pointer

    4. Update button styling to elmex orange:
       - "Wo kaufen" button: bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-full
       - Consistent with brand colors (elmex orange/red)
  </action>
  <verify>
    1. Navigate to /produkte
    2. See real product images (not icons) in all cards
    3. Click anywhere on card → navigates to product detail page
    4. "Wo kaufen" button has orange styling
  </verify>
  <done>Product cards show real images, entire card clickable, orange button styling applied</done>
</task>

<task type="auto">
  <name>Add hover effect to swap to second product image</name>
  <files>src/pages/produkte/index.astro</files>
  <action>
    Implement image swap on hover to show second product image:

    1. Image structure for each product card:
       ```html
       <div class="relative w-full h-48 rounded-xl overflow-hidden mb-4">
         <img
           src="/products/{slug}/{slug}_01.png"
           alt="{product name}"
           class="product-img-main absolute inset-0 w-full h-full object-contain transition-opacity duration-300"
         />
         <img
           src="/products/{slug}/{slug}_02.png"
           alt="{product name} - Ansicht 2"
           class="product-img-hover absolute inset-0 w-full h-full object-contain opacity-0 transition-opacity duration-300"
         />
       </div>
       ```

    2. Add CSS in &lt;style&gt; tag:
       ```css
       .product-card:hover .product-img-main {
         opacity: 0;
       }
       .product-card:hover .product-img-hover {
         opacity: 1;
       }
       ```

    3. Ensure smooth transition (300ms) for professional feel

    WHY: Shows users different product angles, creates engaging interaction without extra clicks
  </action>
  <verify>
    1. Navigate to /produkte
    2. Hover over product card
    3. See image smoothly transition to second product image (_02.png)
    4. Mouse out - returns to first image
  </verify>
  <done>Hover effect swaps product images smoothly, enhancing product preview experience</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Personalized "Für Ihre Routine" section functional and displays correctly
- [ ] All 8 product cards show real product images (not icons)
- [ ] Entire product cards clickable and navigate to correct product page
- [ ] Hover image swap effect works smoothly on all cards
- [ ] "Wo kaufen" buttons styled with elmex orange
- [ ] Filter and sort functionality still works
- [ ] npm run dev starts without errors
- [ ] No console errors on /produkte page
</verification>

<success_criteria>
- Personalized product section at top based on quiz data with fallback
- Product cards fully clickable with real images from public/products/
- Smooth hover effect showing second product image (_02.png)
- Consistent elmex orange button styling throughout
- Professional, engaging product browsing experience
</success_criteria>

<output>
After completion, create `.planning/phases/04-produktsystem-ueberarbeitung/04-01-SUMMARY.md`
</output>
